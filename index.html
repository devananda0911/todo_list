<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Colorful To-Do List ğŸŒ¸</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <h1>âœ¨ My To-Do List âœ¨</h1>
            <button id="theme-toggle" class="theme-btn">ğŸŒ™</button>
        </div>

        <form action="/add" method="POST" class="add-form">
            <input type="text" name="task" placeholder="Add a new task..." required>
            <button type="submit">Add</button>
        </form>

        <ul class="task-list">
            {% for task in tasks %}
                <li class="{{ 'completed' if task.completed }}">
                    <div class="task-left">
                        <input type="checkbox" onchange="window.location.href='/toggle/{{ loop.index0 }}'" {% if task.completed %}checked{% endif %}>
                        <span>{{ task.text }}</span>
                    </div>
                    <a href="/delete/{{ loop.index0 }}" class="delete-btn">ğŸ—‘</a>
                </li>
            {% else %}
                <p class="no-tasks">ğŸŒ¼ Nothing to do yet â€” add your first task!</p>
            {% endfor %}
        </ul>
    </div>

    <script>
        const toggleBtn = document.getElementById('theme-toggle');
        const body = document.body;

        if (localStorage.getItem('theme') === 'dark') {
            body.classList.add('dark-mode');
            toggleBtn.textContent = 'â˜€ï¸';
        }

        toggleBtn.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const isDark = body.classList.contains('dark-mode');
            toggleBtn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });
    </script>
</body>
</html>
